---
layout: post
title:  "What Do Markets Think of President Cheeto?"
date:   2017-02-22
author: Jason Weinreb
---

Trump largely remains a wildcard for the financial markets. As a first cut at understanding his expected impact on the economy, the last chapter of my dissertation looked at how various industries responded to his election, as seen through the stock market. The code below is general enough that it can be modified to conduct any event study based on cumulative abnormal returns. 

We'll need the following libraries:

{% highlight python %}

import os, re, csv
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import datetime as dt
from sklearn import linear_model
from scipy import stats
from tabulate import tabulate
from operator import mul
lm = linear_model.LinearRegression()

{% endhighlight %}

We're interested in how stock prices responded to some of the scandals during Trump's campaign, and to his surprise electoral victory. So let's use a function to make a dictionary of the events of interest and their dates below. 

{% highlight python %}

'''
Wikileaks releases Clinton e-mails	     				3/16/16
Trump entertains renegotiating national debt	           	5/5/16
E-mails show DNC was rigged against Sanders			7/22/16
Trump rags on Khan family	                 			7/30/16
Hillary catches pneumonia	                      			9/11/16
Trump attacks Alicia Machado	                				9/30/16
NYT leaks Trump's tax returns	          				10/1/16
Lewd Trump audio tape surfaces	                     		10/7/16
James Comey re-opens Clinton e-mail investigation		10/28/16
Donald Trump is declared POTUS					11/9/16
'''

def DefineEvents():
    '''
    Returns dictionary of event_name:event_date
    '''
    events = dict()
    events["Hillary Emails"] = dt.datetime(2016,3,16) # Wikileaks 
    events["Trump Debt"] = dt.datetime(2016,5,5) # National Debt
    events["Hillary DNC"] = dt.datetime(2016,7,22) # DNC Leak
    events["Trump Khans"] = dt.datetime(2016,7,30) # Attack on Khan fam.
    events["Hillary Pneumonia"] = dt.datetime(2016,9,11) # Hillary pneumonia
    events["Trump Taxes"] = dt.datetime(2016,9,30) # tax returns + beauty queen
    events["Trump Tape"] = dt.datetime(2016,9,30) # Trump lewd remarks 
    events["Election"] = dt.datetime(2016,11,8) # election
    events["Comey Emails"] = dt.datetime(2016,10,28) # Comey letter
    return events; 

{% endhighlight %}

Load in our time series of stock prices, one column for each security, available [here](/assets/stockSample_11Oct2.csv) in .csv format. Notice that headings are Bloomberg tickers. 
Our full sample of securities and related information is in [securityList.csv](/assets/securityList.csv). This file provides the name of the firm, its Bloomberg ticker, the exchange on which it trades (NYSE or NASDAQ), and the industry to which the firm belongs. All of the included industries should have had good reasons to react strongly to the result of the 2016 election (you can see Ch. 3 of my [PhD thesis](/assets/Weinreb_thesis.pdf) for more on this). 

We can also write a function to plot each stock over time, using the iShares Mexico ETF (EWW) as an example - its price was pretty volatile during election season given Trump's comments about the wall, etc. etc. 

{% highlight python %}
df = pd.read_csv('stockSample_11Oct2.csv', index_col = 0, parse_dates = True)
df.dropna(axis = 0, how = 'all', inplace = True)

def PlotStock(ticker): 
    '''
    Input: ticker e.g. 'HUM US Equity'
    Returns: plot of time series with vertical line for each date in events dict
    '''
    ax = df[[ticker]].plot()
    ymin, ymax = ax.get_ylim()
    ax.vlines(x=list(DefineEvents().values()), ymin = ymin, ymax = ymax, color='r')
    ax.set_ylim([ymin, ymax])
    ax.legend_.remove()
    plt.title(ticker)

PlotStock("EWW US Equity") 

{% endhighlight %}

{% maincolumn 'assets/img/eww.png' "The iShares Mexico ETF during election season"%}
    

<!--more-->



